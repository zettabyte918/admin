"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6404],{6404:(U,f,c)=>{c.r(f),c.d(f,{QuotePageModule:()=>d});var _=c(6895),p=c(433),u=c(5035),g=c(4126),l=c(655),e=c(8256),h=c(1053);function v(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",6),e._uU(2," Client : "),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"b"),e._uU(7),e.qZA(),e.TgZ(8,"b"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-col",5)(11,"ion-item",9),e._uU(12),e.qZA()(),e.TgZ(13,"ion-col",5)(14,"ion-item",9),e._uU(15),e.qZA()(),e.TgZ(16,"ion-col",5)(17,"ion-button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editInvoiceSetting())}),e._UZ(18,"ion-icon",11),e._uU(19," edit "),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.AsE(" ",t.firstname," ",t.lastname,""),e.xp6(3),e.hij(" ",t.company,""),e.xp6(2),e.hij(" ",t.city,""),e.xp6(3),e.hij(" ",t.ItemTax1,"% "),e.xp6(3),e.hij(" ",t.DueDate," ")}}function T(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",6),e._uU(2," Client : "),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"b"),e._uU(7),e.qZA(),e.TgZ(8,"b"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-col",5)(11,"ion-item",9)(12,"ion-label",12),e._uU(13," TVA "),e.qZA(),e.TgZ(14,"ion-input",13),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.ItemTax1=n)}),e.qZA()()(),e.TgZ(15,"ion-col",5)(16,"ion-item",9)(17,"ion-label",12),e._uU(18," Date limite "),e.qZA(),e.TgZ(19,"ion-input",14),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.DueDate=n)}),e.qZA()()(),e.TgZ(20,"ion-col",5)(21,"ion-button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.SaveInvoiceSetting())}),e._UZ(22,"ion-icon",16),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.AsE(" ",t.firstname," ",t.lastname,""),e.xp6(3),e.hij(" ",t.company,""),e.xp6(2),e.hij(" ",t.city,""),e.xp6(5),e.Q6J("ngModel",t.ItemTax1),e.xp6(5),e.Q6J("ngModel",t.DueDate)}}function w(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-button",15),e.NdJ("click",function(n){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.saveItem(n,a))}),e._UZ(1,"ion-icon",16),e.qZA()}}function Z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-row",18)(1,"ion-col",5)(2,"ion-item",19)(3,"ion-textarea",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.ItemName=n)}),e.qZA()()(),e.TgZ(4,"ion-col",6)(5,"ion-item",19)(6,"ion-textarea",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.ItemDesc=n)}),e.qZA()()(),e.TgZ(7,"ion-col",7)(8,"ion-item",21)(9,"ion-label",12),e._uU(10,"Quantit\xe9"),e.qZA(),e.TgZ(11,"ion-input",13),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.ItemQuantity=n)}),e.qZA()()(),e.TgZ(12,"ion-col",7)(13,"ion-item",21)(14,"ion-label",12),e._uU(15,"Prix Unit\xe9"),e.qZA(),e.TgZ(16,"ion-input",13),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.ItemTotal=n)}),e.qZA()()(),e.TgZ(17,"ion-col",7),e._uU(18),e.qZA(),e.TgZ(19,"ion-col",7),e.YNc(20,w,2,0,"ion-button",22),e.qZA()()}if(2&o){const t=e.oxw().$implicit,r=e.oxw();e.xp6(3),e.Q6J("autoGrow",!0)("ngModel",r.ItemName),e.xp6(3),e.Q6J("autoGrow",!0)("ngModel",r.ItemDesc),e.xp6(5),e.Q6J("ngModel",r.ItemQuantity),e.xp6(5),e.Q6J("ngModel",r.ItemTotal),e.xp6(2),e.hij(" ",t.ItemTotal," \u20ac "),e.xp6(2),e.Q6J("ngIf",r.editnumber==t.id)}}function y(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-button",27),e.NdJ("click",function(n){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.editItem(n,a))}),e._UZ(1,"ion-icon",28),e.qZA()}}function I(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",5),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",6),e._UZ(4,"div",23),e.qZA(),e.TgZ(5,"ion-col",7),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",7),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",7),e._uU(10),e.qZA(),e.TgZ(11,"ion-col",7),e.YNc(12,y,2,0,"ion-button",24),e.TgZ(13,"ion-button",25),e.NdJ("click",function(n){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.deleteItem(n,a))}),e._UZ(14,"ion-icon",26),e.qZA()()()}if(2&o){const t=e.oxw().$implicit,r=e.oxw();e.xp6(2),e.hij(" ",t.ItemName," "),e.xp6(2),e.Q6J("innerHTML",t.ItemDesc,e.oJD),e.xp6(2),e.hij(" ",t.Quantity," "),e.xp6(2),e.hij(" ",t.ItemTotal," "),e.xp6(2),e.hij(" ",t.Quantity*t.ItemTotal," "),e.xp6(2),e.Q6J("ngIf",r.editnumber!==t.id&&0==r.editnumber)}}function P(o,i){if(1&o&&(e.TgZ(0,"ion-list"),e.YNc(1,Z,21,8,"ion-row",17),e.YNc(2,I,15,6,"ion-row",3),e.qZA()),2&o){const t=i.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.editnumber==t.id),e.xp6(1),e.Q6J("ngIf",r.editnumber!==t.id)}}function x(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",5)(2,"ion-button",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addItem())}),e._UZ(3,"ion-icon",29),e._uU(4," Ajouter "),e.qZA()(),e._UZ(5,"ion-col",30),e.TgZ(6,"ion-col",7)(7,"b"),e._uU(8,"Sous Total"),e.qZA()(),e.TgZ(9,"ion-col",7)(10,"b"),e._uU(11),e.qZA()()()}if(2&o){const t=i.$implicit;e.xp6(11),e.hij("",t.SubTotal," \u20ac")}}function j(o,i){if(1&o&&(e.TgZ(0,"ion-row"),e._UZ(1,"ion-col",31),e.TgZ(2,"ion-col",7)(3,"b"),e._uU(4),e.ALo(5,"number"),e.qZA()(),e.TgZ(6,"ion-col",7)(7,"b"),e._uU(8),e.qZA()()()),2&o){const t=i.$implicit;e.xp6(4),e.hij("TVA ",e.xi3(5,2,t.ItemTax1,"1.0-1")," %"),e.xp6(4),e.hij("",t.ItemTax1Amount," \u20ac")}}function O(o,i){if(1&o&&(e.TgZ(0,"ion-row"),e._UZ(1,"ion-col",31),e.TgZ(2,"ion-col",7)(3,"b"),e._uU(4,"Total"),e.qZA()(),e.TgZ(5,"ion-col",7)(6,"b"),e._uU(7),e.qZA()()()),2&o){const t=i.$implicit;e.xp6(7),e.hij("",t.Total," \u20ac")}}class m{constructor(i,t,r,n,a,s,Q,D){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"popoverCtrl",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"route",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"loadingController",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:Q}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:D}),Object.defineProperty(this,"editorValue",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{placeholder:"",tabsize:2,height:200,uploadImagePath:"/api/upload",toolbar:[["misc",["codeview","undo","redo"]],["style",["bold","italic","underline","clear"]],["font",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["fontsize",["fontname","fontsize","color"]],["para",["style","ul","ol","paragraph","height"]]],fontNames:["Helvetica","Arial","Arial Black","Comic Sans MS","Courier New","Times"]}}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:"quotes/"}),Object.defineProperty(this,"table2",{enumerable:!0,configurable:!0,writable:!0,value:"projects_byuser/"}),Object.defineProperty(this,"table3",{enumerable:!0,configurable:!0,writable:!0,value:"quotesid"}),Object.defineProperty(this,"table5",{enumerable:!0,configurable:!0,writable:!0,value:"updateQuoteId"}),Object.defineProperty(this,"table6",{enumerable:!0,configurable:!0,writable:!0,value:"quotesend"}),Object.defineProperty(this,"table7",{enumerable:!0,configurable:!0,writable:!0,value:"addItemQuote"}),Object.defineProperty(this,"table8",{enumerable:!0,configurable:!0,writable:!0,value:"updateAllpriceQuote"}),Object.defineProperty(this,"table9",{enumerable:!0,configurable:!0,writable:!0,value:"quotes"}),Object.defineProperty(this,"table10",{enumerable:!0,configurable:!0,writable:!0,value:"users"}),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"push",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"posts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"priority",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"email",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"namebank",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dombank",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"iban",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rib",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bic",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"profilid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"profilId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"edit2",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"editnumber",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ItemName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"iditem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ItemDesc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ItemPrice",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ItemTotal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ItemQuantity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Quantity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idinvoiceuser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"InvoiceID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ItemTax1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"company",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"DueDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"postsTotal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"city",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ngOnInit(){this.route.params.subscribe(i=>{this.id=i.id,this.getdata()})}getdata(){return(0,l.mG)(this,void 0,void 0,function*(){this.redditService.getByid(this.table3,this.id).subscribe(i=>{this.posts=i.data,this.postsTotal=[this.posts[0]],this.idinvoiceuser=this.posts[0].CustomerID,this.InvoiceID=this.posts[0].InvoiceID,this.ItemTax1=this.posts[0].ItemTax1,this.DueDate=this.posts[0].DueDate,this.getuser()})})}getuser(){return(0,l.mG)(this,void 0,void 0,function*(){this.redditService.getByid(this.table10,this.idinvoiceuser).subscribe(i=>{this.firstname=i[0].firstname,this.lastname=i[0].lastname,this.city=i[0].city,this.company=i[0].company})})}doSaveItem(){return(0,l.mG)(this,void 0,void 0,function*(){this.editnumber=0,this.getdata()})}editItem(i,t){return(0,l.mG)(this,void 0,void 0,function*(){console.log(t.id),this.editnumber=t.id,this.ItemName=t.ItemName,this.ItemDesc=t.ItemDesc,this.ItemTotal=t.ItemTotal,this.ItemQuantity=t.Quantity})}saveItem(i,t){return(0,l.mG)(this,void 0,void 0,function*(){this.iditem=t.id,this.redditService.updateinvoice(this.table5,this.iditem,{ItemName:this.ItemName,ItemDesc:this.ItemDesc,ItemTotal:this.ItemTotal,Quantity:this.ItemQuantity,InvoiceID:this.InvoiceID}).toPromise().then(n=>{this.updateAllprice(),setTimeout(()=>{this.getdata(),this.editnumber=0},600)})})}updateAllprice(){return(0,l.mG)(this,void 0,void 0,function*(){this.redditService.updateByid(this.table8,{InvoiceID:this.InvoiceID,ItemTax1:this.ItemTax1,DueDate:this.DueDate}).subscribe(t=>(0,l.mG)(this,void 0,void 0,function*(){setTimeout(()=>{this.getdata()},1e3)}))})}update(){return(0,l.mG)(this,void 0,void 0,function*(){this.redditService.updateByid(this.table8,{InvoiceID:this.InvoiceID,ItemTax1:this.ItemTax1,DueDate:this.DueDate}).subscribe(t=>(0,l.mG)(this,void 0,void 0,function*(){setTimeout(()=>{this.getdata()},1e3)}))})}editInvoiceSetting(){return(0,l.mG)(this,void 0,void 0,function*(){this.edit2=!this.edit2,console.log(this.edit2)})}SaveInvoiceSetting(){return(0,l.mG)(this,void 0,void 0,function*(){this.update(),this.edit2=!this.edit2,console.log(this.edit2)})}invoicesend(){return(0,l.mG)(this,void 0,void 0,function*(){const i=yield this.loadingController.create({message:"Envoi en cours"});i.present(),this.redditService.sendByid(this.table6,this.id).toPromise().then(t=>{setTimeout(()=>{this.getdata(),setTimeout(()=>{i.dismiss()},1300)},400)})})}addItem(){return(0,l.mG)(this,void 0,void 0,function*(){var i=JSON.stringify({InvoiceID:this.InvoiceID,CustomerID:this.idinvoiceuser,ItemPrice:1,Quantity:1,ItemName:"Nouveau produit",ItemDesc:"Description",ItemTotal:1,ItemTax1:this.ItemTax1});this.redditService.addPost(this.table7,i).subscribe(t=>(0,l.mG)(this,void 0,void 0,function*(){console.log(t),setTimeout(()=>{this.getdata()},1e3)}))})}deleteItem(i,t){return(0,l.mG)(this,void 0,void 0,function*(){this.iditem=t.id,yield(yield this.alertController.create({header:"Supprimer",message:"Voulez-vous vraiment ? ",buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:n=>{}},{text:"Oui",handler:()=>{this.redditService.delete(this.table9,this.iditem).toPromise().then(n=>{console.log(n),this.updateAllprice(),setTimeout(()=>{this.getdata()},500)})}}]})).present()})}}Object.defineProperty(m,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||m)(e.Y36(u.SH),e.Y36(u.Dh),e.Y36(u.Br),e.Y36(g.gz),e.Y36(u.HT),e.Y36(h.I),e.Y36(g.F0),e.Y36(u.yF))}}),Object.defineProperty(m,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:m,selectors:[["app-quote"]],decls:33,vars:8,consts:[["slot","end",1,"item-note"],["color","danger","size","medium","target","_blank",3,"href"],["color","success","size","medium",3,"click"],[4,"ngIf"],["padding",""],["size","2"],["size","6"],["size","1"],[4,"ngFor","ngForOf"],["fill","outline"],["color","medium","size","small",3,"click"],["name","settings-outline"],["position","floating"],["placeholder","Enter text","type","number",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],["color","success","size","small",3,"click"],["name","save-outline"],["style","padding-top: 3px;",4,"ngIf"],[2,"padding-top","3px"],[1,"roundedInput"],[3,"autoGrow","ngModel","ngModelChange"],["fill","outline",1,"roundedInput"],["color","success","size","small",3,"click",4,"ngIf"],[3,"innerHTML"],["color","primary","size","small",3,"click",4,"ngIf"],["ion-button","","outline","","item-end","","size","small","color","secondary",3,"click"],["name","trash-outline"],["color","primary","size","small",3,"click"],["name","create-outline"],["name","add-circle-outline"],["size","8"],["size","10"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-content")(1,"ion-item"),e._uU(2),e.TgZ(3,"div",0)(4,"ion-button",1),e._uU(5,"T\xe9l\xe9charger devis PDF "),e.qZA(),e.TgZ(6,"ion-button",2),e.NdJ("click",function(){return t.invoicesend()}),e._uU(7,"Envoyer devis par email "),e.qZA()()(),e.YNc(8,v,20,6,"ion-row",3),e.YNc(9,T,23,6,"ion-row",3),e.TgZ(10,"ion-grid",4)(11,"ion-row")(12,"ion-col",5)(13,"b"),e._uU(14,"Element"),e.qZA()(),e.TgZ(15,"ion-col",6)(16,"b"),e._uU(17,"Description"),e.qZA()(),e.TgZ(18,"ion-col",7)(19,"b"),e._uU(20,"Quantit\xe9"),e.qZA()(),e.TgZ(21,"ion-col",7)(22,"b"),e._uU(23,"Prix"),e.qZA()(),e.TgZ(24,"ion-col",7)(25,"b"),e._uU(26,"Total"),e.qZA()(),e.TgZ(27,"ion-col",7),e._UZ(28,"b"),e.qZA()(),e.YNc(29,P,3,2,"ion-list",8),e.YNc(30,x,12,1,"ion-row",8),e.YNc(31,j,9,5,"ion-row",8),e.YNc(32,O,8,1,"ion-row",8),e.qZA()()),2&i&&(e.xp6(2),e.hij(" Devis_ID :",t.id," "),e.xp6(2),e.MGl("href","https://api.alpes-solutech.fr/api/quote/",t.id,""),e.xp6(4),e.Q6J("ngIf",!t.edit2),e.xp6(1),e.Q6J("ngIf",t.edit2),e.xp6(20),e.Q6J("ngForOf",t.posts),e.xp6(1),e.Q6J("ngForOf",t.postsTotal),e.xp6(1),e.Q6J("ngForOf",t.postsTotal),e.xp6(1),e.Q6J("ngForOf",t.postsTotal))},dependencies:[_.sg,_.O5,p.JJ,p.On,u.YG,u.wI,u.W2,u.jY,u.gu,u.pK,u.Ie,u.Q$,u.q_,u.Nd,u.g2,u.as,u.j9,_.JJ]})});const A=[{path:"",component:m}];class b{}Object.defineProperty(b,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||b)}}),Object.defineProperty(b,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:b})}),Object.defineProperty(b,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[g.Bz.forChild(A),g.Bz]})});class d{}Object.defineProperty(d,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return new(i||d)}}),Object.defineProperty(d,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:d})}),Object.defineProperty(d,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[_.ez,p.u5,u.Pc,b]})})}}]);